10  GOSUB 60000: &  NEW : REM INIT FDRAW

100 NM% =  - 16302:KB% =  - 16384:KC% =  - 16336
1000  TEXT : NORMAL : HOME : PRINT  CHR$ (17)
1010  &  HGR : POKE NM%,0

2000  PRINT D$;"PR#3" : PRINT  CHR$ (12); : REM ENABLE 80 COL
2010  POKE 49239,0: REM TURN ON HIRES
2070  POKE 49237,0: PRINT D$;"BLOAD TITLE, A$2000, L$2000"
2072  POKE 49236,0: PRINT D$;"BLOAD TITLE, A$2000, L$2000, B$2000"
2074  POKE 49232,0: REM TURN ON GRAPHICS
2076  POKE 49234,0: REM TURN ON FULLSCREEN /49235 MIXED/
2078  POKE 49246,0: REM TURN ON DHR

22000 CR% = 1 : CC% = 1 : REM Initial pointer position at top left
22030 GOSUB 30400 : REM Mouseon
22040 GOSUB 30550 : REM Follow Mouse
22150 GOTO 22040 : REM Repeat (TODO: exit)
22155 GOSUB 30500 : REM MouseOff
22160 TEXT
22170 END

30400 PRINT: PRINT D$;"PR#4" : PRINT CHR$ (1) : REM Turn mouse on
30410 PRINT: PRINT D$;"PR#0" : REM Switch back to screen output
30420 PRINT: PRINT D$;"IN#4" : REM Get input from mouse
30430 RETURN

30500 PRINT: PRINT D$;"IN#0" : REM Turn mouse off switch back keyboard input
30510 PRINT: PRINT D$;"PR#4" : PRINT CHR$ (0):REM Turn mouse off
30520 PRINT: PRINT D$;"PR#0" : REM Switch back to screen output
30530 POKE 49168,0 : REM Clear keyboard
30540 RETURN

30550 IF CC% = PC% AND CR% = PR% THEN GOTO 30600
30555 REM clear previous - paint over with black
30560 REM &  HCOLOR =  0: REM CLEAR
30570 REM XL = PC%
30580 REM YT = PR%
30590 REM GOSUB 30790

30600 REM Follow Mouse
30610 &  HCOLOR =  RND (1) * 6 + 1
30620 PC% = CC% : REM Previous pointer pos. = current pos.
30630 PR% = CR% : REM Previous pointer pos. = current pos.
30640 INPUT CC%,CR%: REM Read mouse pos. and status
30650 CC% = CC% / 3.7: REM coordinates conversion 1024
30660 CR% = CR% / 5.4: REM coordinates conversion
30770 XL = CC%
30780 YT = CR%
30790  &  XDRAW XL,YT,XL+2,YT+2
30900 RETURN

60000  REM INITIAL SETUP
60005 D$ =  CHR$ (4)
60010 DE% = 0: IF  PEEK (768) <  >  ASC ("f") OR  PEEK (769) <  >  ASC ("D") THEN 60100
60020  REM LAUNCHED FROM DEMO MENU
60030 DE% = 1: POKE 768,0: POKE 769,0
60040  RETURN 
60100  REM STARTED BY HAND, LOAD SUBRS
60110  PRINT D$"PREFIX": INPUT PR$
60120 P$ = PR$: IF  RIGHT$ (PR$,6) = "DEMOS/" THEN P$ =  LEFT$ (PR$, LEN (PR$) - 6)
60130  PRINT D$"BLOAD "P$"FDRAW.FAST": PRINT D$"BRUN "P$"AMPERFDRAW"
60140  RETURN 
